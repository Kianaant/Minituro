<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Turn-O-Tron</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{
  box-sizing:border-box;
  font-family:'Poppins',sans-serif;
}

body{
  margin:0;
  background:#f4efe6;
  display:flex;
  justify-content:center;
}

.mobile-wrapper{
  width:100%;
  max-width:420px;
  height:100vh;
  display:flex;
  flex-direction:column;
  position:relative;
  background:#f4efe6;
}

.content{
  flex:1;
  overflow-y:auto;
  padding:20px;
  text-align:center;
  padding-bottom:100px;
}

.hero-section{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

.logo{
  width:100px;
  margin-bottom:10px;
  background: transparent;
  padding:8px 14px;
  border-radius:18px;
}

.character{
  width:200px;
  margin-top:5px;
}


.question{
  background:white;
  padding:15px;
  border-radius:20px;
  margin:15px 0;
  font-weight:600;
}

.buttons{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}

button{
  padding:14px;
  border:none;
  border-radius:15px;
  font-weight:600;
  cursor:pointer;
  transition:0.2s;
}

button:active{
  filter:brightness(0.75);
}

.direction{
  background:#1f78c8;
  color:white;
}

.turn{
  background:#f57c00;
  color:white;
}

.selected{
  filter:brightness(0.7);
}

.correct{
  background:#4caf50 !important;
  animation:fade 0.4s;
}

.wrong{
  background:#e53935 !important;
  animation:shake 0.4s;
}

@keyframes shake{
  0%{transform:translateX(0);}
  25%{transform:translateX(-5px);}
  50%{transform:translateX(5px);}
  75%{transform:translateX(-5px);}
  100%{transform:translateX(0);}
}

@keyframes fade{
  from{opacity:0.4;}
  to{opacity:1;}
}

.lives{
  margin-top:15px;
  font-size:22px;
}

.heart{
  display:inline-block;
  margin:2px;
}

.shakeHeart{
  animation:shake 0.4s;
}

/* ===== FOOTER ===== */

.footer{
  position:absolute;
  bottom:0;
  width:100%;
  height:80px;
  background:#ff8c3a;
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-top-left-radius:0px;
  border-top-right-radius:0px;
}

.footer a{
  text-decoration:none;
  color:white;
  font-size:12px;
  display:flex;
  flex-direction:column;
  align-items:center;
}

.footer img{
  width:28px;
  margin-bottom:4px;
  transition:0.2s;
}

.footer img:active{
  transform:scale(0.9);
}

/* ===== POPUP ===== */

.popup-overlay{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.5);
  display:flex;
  justify-content:center;
  align-items:center;
  opacity:0;
  pointer-events:none;
  transition:0.3s ease;
  z-index:999;
}

.popup-overlay.active{
  opacity:1;
  pointer-events:auto;
}

.popup-box{
  background:white;
  padding:30px;
  width:80%;
  max-width:320px;
  border-radius:20px;
  text-align:center;
  animation:fadePop 0.3s ease;
}

.popup-btn{
  background:#f57c00;
  color:white;
  border:none;
  padding:12px;
  border-radius:12px;
  font-weight:600;
  width:100%;
  margin:8px 0;
  cursor:pointer;
  transition:0.2s;
}

.popup-btn:active{
  filter:brightness(0.8);
}

@keyframes fadePop{
  from{transform:scale(0.8); opacity:0;}
  to{transform:scale(1); opacity:1;}
}

.chat-label{
  position:absolute;
  top:330px;
  left:26px;
  background:#ff7a00;
  color:#fff;
  padding:4px 10px;
  border-radius:12px;
  font-size:11px;
  font-weight:600;
}

.logo{
  width:80px;
  margin-bottom:10px;

  padding:8px;
  border-radius:18px;
}

</style>
</head>

<body>

<div class="mobile-wrapper">

<div class="content">

<div class="hero-section">
  <img src="img/minituro.png" class="logo">
  <img id="character" class="character" src="clockwise.gif">
</div>


<div class="question">
<div class="chat-label">Turn-O-Tron</div>

Which direction is the arrow going?
</div>

<div id="instruction" style="font-size:13px; font-weight:600; margin-bottom:10px; color:#555;"></div>

<div class="buttons">
  <button class="direction" onclick="selectAnswer(this,'clockwise')">Clockwise</button>
  <button class="direction" onclick="selectAnswer(this,'counterclockwise')">Counter-Clockwise</button>
  <button class="turn" onclick="selectAnswer(this,'half')">Half Turn</button>
  <button class="turn" onclick="selectAnswer(this,'quarter')">Quarter Turn</button>
  <button class="turn" style="grid-column:1/3;" onclick="selectAnswer(this,'threequarter')">3-Quarter Turn</button>
</div>

<div class="lives" id="lives"></div>
(lives left)

</div>

<!-- FOOTER -->
<div class="footer">
  
  <a href="home.html">
    <img src="img/home.png">
    Home
  </a>
  <a href="info.html">
    <img src="img/info.png">
    Info
  </a>
</div>

</div>

<!-- POPUP -->
<div id="popupOverlay" class="popup-overlay">
  <div class="popup-box">
    <h2 id="popupTitle"></h2>
    <div id="popupButtons"></div>
  </div>
</div>

<script>

let lives = 7;
let selected = [];
let currentQuestion = 0;

const questions = [
{img:"img/clockwise.gif", answer:["clockwise"], type:"direction"},
{img:"img/counterclockwise.gif", answer:["counterclockwise"], type:"direction"},
{img:"img/qtclock.gif", answer:["clockwise","quarter"], type:"full"},
{img:"img/qtcount.gif", answer:["counterclockwise","quarter"], type:"full"},
{img:"img/htclock.gif", answer:["clockwise","half"], type:"full"},
{img:"img/htcount.gif", answer:["counterclockwise","half"], type:"full"},
{img:"img/3qtclock.gif", answer:["clockwise","threequarter"], type:"full"},
{img:"img/3qtcount.gif", answer:["counterclockwise","threequarter"], type:"full"},
{img:"img/qtclock.gif", answer:["clockwise","quarter"], type:"full"},
{img:"img/3qtcount.gif", answer:["counterclockwise","threequarter"], type:"full"}
];

function renderLives(){
  let html="";
  for(let i=0;i<lives;i++){
    html+="<span class='heart'>‚ù§Ô∏è </span>";
  }
  document.getElementById("lives").innerHTML = html;
}
renderLives();

function selectAnswer(button,value){

  let needed = questions[currentQuestion].type === "direction" ? 1 : 2;
  if(selected.length >= needed) return;

  if(!selected.includes(value)){
    selected.push(value);
    button.classList.add("selected");
  }

  if(selected.length === needed){
    checkAnswer();
  }
}

function checkAnswer(){

  let correct = questions[currentQuestion].answer;

  let isCorrect =
    correct.every(ans => selected.includes(ans)) &&
    selected.length === correct.length;

  if(isCorrect){
    document.querySelectorAll(".selected").forEach(btn=>{
      btn.classList.add("correct");
    });
    setTimeout(nextQuestion,600);
  }else{
    document.querySelectorAll(".selected").forEach(btn=>{
      btn.classList.add("wrong");
    });
    loseLife();
    setTimeout(resetButtons,600);
  }
}

function loseLife(){
  lives--;
  renderLives();
  document.querySelectorAll(".heart").forEach(h=>{
    h.classList.add("shakeHeart");
  });

  if(lives <= 0){
    showGameOver();
  }
}

function resetButtons(){
  selected=[];
  document.querySelectorAll("button").forEach(btn=>{
    btn.classList.remove("selected","wrong","correct");
  });
}

function nextQuestion(){
  selected=[];
  document.querySelectorAll("button").forEach(btn=>{
    btn.classList.remove("selected","wrong","correct");
  });

  currentQuestion++;

  if(currentQuestion >= questions.length){
    showWin();
    return;
  }

  loadQuestion();
}

function loadQuestion(){
  let q = questions[currentQuestion];
  document.getElementById("character").src = q.img;

  let turnButtons = document.querySelectorAll(".turn");
  let instruction = document.getElementById("instruction");

  if(q.type === "direction"){
    turnButtons.forEach(btn => btn.style.display = "none");
    instruction.innerHTML = ""; // No instruction needed
  }else{
    turnButtons.forEach(btn => btn.style.display = "block");
    instruction.innerHTML = "Select two buttons";
  }
}

function showGameOver(){
  document.getElementById("popupTitle").innerHTML = "GAME OVER üòµ‚Äçüí´";
  document.getElementById("popupButtons").innerHTML = `
    <button class="popup-btn" onclick="restartGame()">Restart</button>
    <button class="popup-btn" onclick="window.location.href='turn.html'">
      Review Turns & Directions
    </button>
  `;
  document.getElementById("popupOverlay").classList.add("active");
}

function showWin(){
  document.getElementById("popupTitle").innerHTML = "Boss Defeated üéâ";
  document.getElementById("popupButtons").innerHTML = `
    <button class="popup-btn" onclick="window.location.href='home.html'">
      Back Home
    </button>
  `;
  document.getElementById("popupOverlay").classList.add("active");
}

function restartGame(){
  lives = 10;
  currentQuestion = 0;
  selected = [];
  renderLives();
  loadQuestion();
  document.getElementById("popupOverlay").classList.remove("active");
}

loadQuestion();

</script>

</body>
</html>
